# EOS.IO 技术白皮书 V2

**2018 年 3 月 16 日 (翻译：荆雷）**

**摘要：** EOS.IO 软件引入了一种新的区块链架构，该架构使得去中心化应用可以垂直和水平扩展性能。这是通过创建一个类似操作系统的架构，各类应用运行在这个系统之上达到的。软件提供了帐户、身份验证、数据库、异步通信以及在众多CPU或集群之间的调度功能。该技术最终会是一个最大能扩展到数百万次交易每秒，免除用户费用，并允许快捷地发布和维护去中心化应用的区块链架构，这一切都是在一个受治理的区块链环境中。

**请注意：本白皮书中所提到加密令牌是指在 EOS.IO 软件启动后的区块链上的令牌。而不是指之前在以太坊区块链上分发的 ERC-20 兼容 EOS 令牌。**

版权 © 2018 block.one


<!-- MarkdownTOC depth=4 autolink=true bracket=round list_bullets="-*+" -->

- [背景](#background)
- [区块链应用的要求](#requirements-for-blockchain-applications)
  * [支持数百万用户](#support-millions-of-users)
  * [免费使用](#free-usage)
  * [升级简单和缺陷修复](#easy-upgrades-and-bug-recovery)
  * [低延迟](#low-latency)
  * [串行性能](#sequential-performance)
  * [并行性能](#parallel-performance)
- [共识算法 (BFT-DPOS))](#consensus-algorithm-bft-dpos)
  * [交易确认](#transaction-confirmation)
  * [交易作为权益证明 (TaPoS)](#transaction-as-proof-of-stake-tapos)
- [帐户](#accounts)
  * [操作 & 处理](#actions--handlers)
  * [基于角色的权限管理](#role-based-permission-management)
    + [命名的权限级别](#named-permission-levels)
    + [权限映射](#permission-mapping)
    + [评估权限](#evaluating-permissions)
      - [默认权限群组](#default-permission-groups)
      - [权限并行评估](#parallel-evaluation-of-permissions)
  * [带强制性延时的操作](#actions-with-mandatory-delay)
  * [恢复被盗窃的密钥](#recovery-from-stolen-keys)
- [Deterministic Parallel Execution of Applications](#deterministic-parallel-execution-of-applications)
  * [Minimizing Communication Latency](#minimizing-communication-latency)
  * [Read-Only Action Handlers](#read-only-action-handlers)
  * [Atomic Transactions with Multiple Accounts](#atomic-transactions-with-multiple-accounts)
  * [Partial Evaluation of Blockchain State](#partial-evaluation-of-blockchain-state)
  * [Subjective Best Effort Scheduling](#subjective-best-effort-scheduling)
  * [Deferred Transactions](#deferred-transactions)
  * [Context Free Actions](#context-free-actions)
- [Token Model and Resource Usage](#token-model-and-resource-usage)
  * [Objective and Subjective Measurements](#objective-and-subjective-measurements)
  * [Receiver Pays](#receiver-pays)
  * [Delegating Capacity](#delegating-capacity)
  * [Separating Transaction costs from Token Value](#separating-transaction-costs-from-token-value)
  * [State Storage Costs](#state-storage-costs)
  * [Block Rewards](#block-rewards)
  * [Worker Proposal System](#worker-proposal-system)
- [Governance](#governance)
  * [Freezing Accounts](#freezing-accounts)
  * [Changing Account Code](#changing-account-code)
  * [Constitution](#constitution)
  * [Upgrading the Protocol & Constitution](#upgrading-the-protocol--constitution)
    + [Emergency Changes](#emergency-changes)
- [Scripts & Virtual Machines](#scripts--virtual-machines)
  * [Schema Defined Actions](#schema-defined-actions)
  * [Schema Defined Database](#schema-defined-database)
  * [Generic Multi Index Database API](#generic-multi-index-database-api)
  * [Separating Authentication from Application](#separating-authentication-from-application)
- [Inter Blockchain Communication](#inter-blockchain-communication)
  * [Merkle Proofs for Light Client Validation \(LCV\)](#merkle-proofs-for-light-client-validation-lcv)
  * [Latency of Interchain Communication](#latency-of-interchain-communication)
  * [Proof of Completeness](#proof-of-completeness)
  * [Segregated Witness](#segregated-witness)
- [Conclusion](#conclusion)

<!-- /MarkdownTOC -->

# 背景

区块链技术随着 2008 年比特币的发行得以被认知，从那之后创业者和开发者就不断的尝试推广这一技术，以便在单一的区块链平台上支持更为广泛的应用程序。

当一些区块链平台吃力的支持勉强可用的去中心化应用，应用化的区块链比如 BitShares 去中心化交易所 (2014) 和 Steem 社交媒体平台 (2016) 已经成为每天被成千上万的日活用户重度使用的区块链。 他们能做到这些，是通过提升性能到每秒处理上千笔交易，降低延迟到1.5秒，消除每笔交易的手续费和提供堪比现有的中心化服务的用户体验。

现有的区块链平台被大额使用费和有限的计算能力拖累，它们也阻碍了区块链的大范围推广。

# 区块链应用的要求

为了赢得广泛的应用，区块链上的应用需要一个足够灵活得以满足以下要求的平台：

## 支持成百上千的用户

要与 Ebay、Uber、AirBnB 和 Facebook 这样企业竞争，需要区块链技术能处理数千万的日活用户。 在某些情况下，除非用户群体达到一定量级否则应用并不会起多大作用，因此一个可以处理庞大用户的平台是至关重要的。

## 免费使用

应用开发人员需要一定的灵活性以便为户提供免费服务；用户不需要必须为使用该平台或从其服务中受益而支付费用。一个给用户免费使用的区块链平台将可能获得更广泛的认可。开发者和企业然后可以建立有效的盈利策略。


## 升级简单和缺陷修复

企业构建基于区块链的应用需要能够为应用增加新特性的灵活性。平台必须支持软件和智能合约的升级。

所有非同简单的软件都会受到缺陷的影响，即便是经过了最严格的形式验证。这个平台必须在缺陷不可避免出现时足够健壮到可修复。

## 低延时

一个好的用户体验要求不超过数秒延迟的可靠反馈。 高延时会使用户感到灰心，并且会让构建在区块链上的应用比已有的非区块链应用缺乏竞争力。平台应该支持低延时交易。

## 串行性能

有些应用因为有依赖有先后关系的步骤而不能使用并行算法实现。比如交易所这样的应用就需要足够的串行性能来处理很高的交易量。因此平台应该支持高串行性能。

## 并行性能

大型应用需要将工作分配到多个 CPU 和计算机。